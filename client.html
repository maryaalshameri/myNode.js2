<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Socket.io Realtime Test</title>
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
  </head>
  <body>
    <h2>ðŸŸ¢ Real-Time Notifications</h2>
    <ul id="events"></ul>

    <h3>ðŸ’¬ Chat Room</h3>
    <input id="username" placeholder="Your name" />
    <input id="message" placeholder="Type a message..." />
    <button onclick="sendMessage()">Send</button>

    <ul id="chat"></ul>

    <script>
      const socket = io("http://localhost:3000");

      // Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø¥Ø´Ø¹Ø§Ø±Ø§Øª Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
      socket.on("newProduct", (data) => addEvent(data.message));
      socket.on("productUpdated", (data) => addEvent(data.message));
      socket.on("productDeleted", (data) => addEvent(data.message));

      // Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø±Ø³Ø§Ø¦Ù„ Ø§Ù„Ø´Ø§Øª
      socket.on("chatMessage", (data) => {
        const li = document.createElement("li");
        li.textContent = `${data.time} - ${data.user}: ${data.message}`;
        document.getElementById("chat").appendChild(li);
      });

      function addEvent(msg) {
        const li = document.createElement("li");
        li.textContent = msg;
        document.getElementById("events").appendChild(li);
      }

      // Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„Ø©
      function sendMessage() {
        const user = document.getElementById("username").value || "Anonymous";
        const message = document.getElementById("message").value;
        socket.emit("chatMessage", { user, message });
        document.getElementById("message").value = "";
      }
    </script>
  </body>
</html>
